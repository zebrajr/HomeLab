!function(e,t,a,i,s){function n(t,a){function i(e){return n(i.resolve(e))}if(!d[t]){if(!e[t]){var s="function"==typeof o.parcelRequire7d67&&o.parcelRequire7d67;if(!a&&s)return s(t,!0);if(r)return r(t,!0);if(l&&"string"==typeof t)return l(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}i.resolve=a=>e[t][1][a]||a,i.cache={};var h=d[t]=new n.Module(t);e[t][0].call(h.exports,i,h,h.exports,this)}return d[t].exports}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r="function"==typeof o.parcelRequire7d67&&o.parcelRequire7d67,d=r.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);n.isParcelRequire=!0,n.Module=function(e){this.id=e,this.bundle=n,this.exports={}},n.modules=e,n.cache=d,n.parent=r,n.register=(t,a)=>{e[t]=[(e,t)=>{t.exports=a},{}]},Object.defineProperty(n,"root",{get(){return o.parcelRequire7d67}}),o.parcelRequire7d67=n;for(var c=0;t.length>c;c++)n(t[c]);var h=n("f7LQc");"object"==typeof exports&&"undefined"!=typeof module?module.exports=h:"function"==typeof define&&define.amd&&define((()=>h))}({f7LQc:[function(e,t,a){function i(e,t){s(atom.packages.getApmPath(),["install"],t,{cwd:e})}function s(e,t,a,i={}){return new c.BufferedProcess({command:e,args:t,exit:a,options:i})}var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(a);var o=e("./deps/underscore-plus"),r=e("fs-plus"),d=e("path"),l=n.interopDefault(d),c=e("atom"),h=e("./decorators/element"),p=n.interopDefault(h);const u=class{static initClass(){return this.registerCommands(),p.default(this,"minimap-plugin-generator")}static registerCommands(){atom.commands.add("minimap-plugin-generator",{"core:confirm"(){this.confirm()},"core:cancel"(){this.detach()}})}createdCallback(){this.previouslyFocusedElement=null,this.mode=null,this.modal=document.createElement("atom-panel"),this.modal.classList.add("minimap-plugin-generator"),this.modal.classList.add("modal"),this.modal.classList.add("overlay"),this.modal.classList.add("from-top"),this.editor=atom.workspace.buildTextEditor({mini:!0}),this.editorElement=atom.views.getView(this.editor),this.error=document.createElement("div"),this.error.classList.add("error"),this.message=document.createElement("div"),this.message.classList.add("message"),this.modal.appendChild(this.editorElement),this.modal.appendChild(this.error),this.modal.appendChild(this.message),this.appendChild(this.modal)}attachedCallback(){this.previouslyFocusedElement=document.activeElement,this.message.textContent="Enter plugin path",this.setPathText("my-minimap-plugin"),this.editorElement.focus()}attach(){atom.views.getView(atom.workspace).appendChild(this)}setPathText(e,t){t||(t=[0,e.length]);const a=atom.config.get("core.projectHome")||process.env.ATOM_REPOS_HOME||l.default.join(r.getHomeDirectory(),"github");this.editor.setText(l.default.join(a,e));const i=this.editor.getText().length-e.length;this.editor.setSelectedBufferRange([[0,i+t[0]],[0,i+t[1]]])}detach(){this.parentNode&&(this.previouslyFocusedElement&&this.previouslyFocusedElement.focus(),this.parentNode.removeChild(this))}confirm(){this.validPackagePath()&&(this.removeChild(this.modal),this.message.innerHTML=`\n        <span class='loading loading-spinner-tiny inline-block'></span>\n        Generate plugin at <span class="text-primary">${this.getPackagePath()}</span>\n      `,this.createPackageFiles((()=>{const e=this.getPackagePath();atom.open({pathsToOpen:[e],devMode:atom.config.get("minimap.createPluginInDevMode")}),this.message.innerHTML='<span class="text-success">Plugin successfully generated, opening it now...</span>',setTimeout((()=>{this.detach()}),2e3)})))}getPackagePath(){const e=this.editor.getText(),t=o.dasherize(l.default.basename(e));return l.default.join(l.default.dirname(e),t)}validPackagePath(){return!r.existsSync(this.getPackagePath())||(this.error.textContent=`Path already exists at '${this.getPackagePath()}'`,this.error.style.display="block",!1)}initPackage(e,t){const a=l.default.resolve(__dirname,l.default.join("..","templates","plugin-"+this.template));s(atom.packages.getApmPath(),["init","-p",""+e,"--template",a],t)}createPackageFiles(e){const t=this.getPackagePath();(e=>{const t=l.default.join(atom.getConfigDirPath(),"packages",l.default.sep);if(0===e.indexOf(t))return!0;const a=l.default.join(atom.getConfigDirPath(),"dev","packages",l.default.sep);return 0===e.indexOf(a)})(t)?this.initPackage(t,(()=>{i(t,e)})):this.initPackage(t,(()=>{((e,t)=>{const a=["link"];atom.config.get("minimap.createPluginInDevMode")&&a.push("--dev"),a.push(""+e),s(atom.packages.getApmPath(),a,t)})(t,(()=>{i(t,e)}))}))}}.initClass();a.default=u},{"./deps/underscore-plus":"fHACO","./decorators/element":"dpbCf","@parcel/transformer-js/src/esmodule-helpers.js":"f4OPK"}]},["f7LQc"]);
//# sourceMappingURL=minimap-plugin-generator-element.dd7c0fd8.js.map
